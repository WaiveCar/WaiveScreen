#!/usr/bin/python3
import lib.lib as lib
import sys
import json
import os

DEBUG = 'DEBUG' in os.environ

if len(sys.argv) > 1:
  if DEBUG:
    res = eval("lib." + sys.argv[1] + "()")
  else:
    try:
      res = eval("lib." + sys.argv[1] + "()")
    except:
      try:
        res = eval("lib." + sys.argv[1])
      except:
        res = False

  if res and not callable(res):
    print(json.dumps(res))

else:
  print("I need an argument")
  [print(" {}".format(x)) for x in sorted(list(set(dir(lib)) - set(dir())))]
  sys.exit(-1)
